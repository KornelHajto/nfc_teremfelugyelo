<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Card Reader System</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <div class="container">
        <header>
            <img src="/static/images/logo.png" alt="Logo" class="logo" onerror="this.style.display='none'">
            <h1>Card Reader System</h1>
        </header>

        <main>
            <!-- Main action buttons -->
            <div class="button-container" id="main-buttons">
                <button id="enter-btn" class="action-btn enter-btn">
                    <span class="material-icons btn-icon">login</span>
                    <span>Enter</span>
                </button>
                <button id="leave-btn" class="action-btn leave-btn">
                    <span class="material-icons btn-icon">logout</span>
                    <span>Leave</span>
                </button>
            </div>

            <!-- Status message area -->
            <div class="status-container">
                <div id="status-message" class="status-message"></div>
            </div>

            <!-- Card reader stage -->
            <div id="card-stage" class="card-stage hidden">
                <div class="card-prompt">
                    <div class="card-icon">ðŸ’³</div>
                    <h2>Please place your card on the reader</h2>
                    <p>Waiting for card detection...</p>
                    <div class="spinner"></div>
                    <button id="cancel-btn" class="secondary-btn">Cancel</button>
                </div>
            </div>

            <!-- Camera capture stage -->
            <div id="camera-stage" class="camera-stage hidden">
                <div class="camera-container">
                    <h2>Please position yourself for photo verification</h2>
                    <video id="video" autoplay playsinline></video>
                    <canvas id="canvas" class="hidden"></canvas>
                    <div class="camera-controls">
                        <button id="capture-btn" class="primary-btn">Capture Photo</button>
                        <button id="cancel-camera-btn" class="secondary-btn">Cancel</button>
                    </div>
                </div>
            </div>

            <!-- Photo preview and confirmation stage -->
            <div id="preview-stage" class="preview-stage hidden">
                <div class="preview-container">
                    <h2>Photo Captured</h2>
                    <img id="preview-image" src="" alt="Captured photo">
                    <div id="analysis-result" class="analysis-result"></div>
                    <div class="preview-controls">
                        <button id="confirm-btn" class="primary-btn">Confirm</button>
                        <button id="retake-btn" class="secondary-btn">Retake Photo</button>
                    </div>
                </div>
            </div>

            <!-- Result display -->
            <div id="result-stage" class="result-stage hidden">
                <div class="result-container">
                    <div id="result-icon" class="result-icon"></div>
                    <h2 id="result-title"></h2>
                    <p id="result-message"></p>
                    <div id="result-details" class="result-details"></div>
                    <button id="done-btn" class="primary-btn">Done</button>
                </div>
            </div>
        </main>

        <footer>
            <div class="connection-status">
                <span id="ws-status" class="status-indicator disconnected"></span>
                <span id="ws-text">Disconnected</span>
            </div>
        </footer>
    </div>

    <script src="/static/app.js"></script>
</body>
</html>
